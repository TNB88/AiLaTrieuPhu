<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ai L√† Tri·ªáu Ph√∫ - B√¨nh Pro</title>
    <style>
        body {
            background-color: #020b1c;
            color: #fff;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent; /* B·ªè highlight xanh khi b·∫•m tr√™n iPhone */
        }

        /* M√†n h√¨nh ch·ªù "B·∫™Y" ƒë·ªÉ k√≠ch ho·∫°t √¢m thanh */
        #start-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 11, 28, 1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            text-align: center;
        }

        .btn-big-start {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: #dc3545; /* M√†u ƒë·ªè n·ªïi b·∫≠t */
            border: 5px solid #fff;
            color: #fff;
            font-size: 25px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 30px #dc3545;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 20px rgba(220, 53, 69, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }

        /* Thang ti·ªÅn mobile */
        .money-ladder {
            position: absolute;
            right: 5px; top: 5px;
            background: rgba(0,0,0,0.8);
            padding: 5px;
            border-radius: 5px;
            font-size: 11px;
            max-height: 25vh;
            overflow-y: auto;
            border: 1px solid #f0ad4e;
        }
        .money-step.active { background: #f0ad4e; color: #000; font-weight: bold; }

        .game-container { width: 95%; max-width: 600px; text-align: center; display: flex; flex-direction: column; gap: 10px; }
        
        .question-box {
            background: #003366; border: 2px solid #fff; border-radius: 10px;
            padding: 15px; font-size: 16px; font-weight: bold; min-height: 70px;
            display: flex; align-items: center; justify-content: center;
        }

        .answers-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        
        .answer-btn {
            background: #001a33; border: 1px solid #aaa; border-radius: 15px;
            padding: 15px 5px; color: white; font-size: 14px; min-height: 50px;
        }
        .answer-btn.selected { background: #f0ad4e; color: black; }
        .answer-btn.correct { background: #28a745 !important; }
        .answer-btn.wrong { background: #dc3545 !important; }

        .lifelines { display: flex; gap: 10px; justify-content: center; margin-top: 10px; }
        .lifeline-btn { width: 45px; height: 45px; border-radius: 50%; background: #555; border: 1px solid #fff; color: #fff; font-size: 10px; display: flex; justify-content: center; align-items: center;}
        .lifeline-btn.used { opacity: 0.3; pointer-events: none; }

        #result-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); display: none;
            flex-direction: column; justify-content: center; align-items: center; z-index: 100;
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <h2 style="color: #f0ad4e; margin-bottom: 20px;">AI L√Ä TRI·ªÜU PH√ö</h2>
        <button class="btn-big-start" onclick="unlockAudioAndStart()">B·∫§M V√ÄO ƒê√ÇY<br>ƒê·ªÇ CH∆†I</button>
        <p style="margin-top: 20px; font-size: 12px; color: #ccc;">(B·∫•m n√∫t ƒë·ªè ƒë·ªÉ b·∫≠t loa iPhone)</p>
    </div>

    <div id="result-screen">
        <h1 id="result-title" style="color: #fff">GAME OVER</h1>
        <h2 id="result-money" style="color: #f0ad4e">0 VND</h2>
        <button class="answer-btn" style="width: 150px; margin-top: 20px;" onclick="location.reload()">CH∆†I L·∫†I</button>
    </div>

    <div class="money-ladder" id="moneyLadder"></div>

    <div class="game-container">
        <div class="question-box" id="questionText">ƒêang t·∫£i c√¢u h·ªèi...</div>

        <div class="answers-grid">
            <button class="answer-btn" onclick="checkAnswer(0)" id="btn0"></button>
            <button class="answer-btn" onclick="checkAnswer(1)" id="btn1"></button>
            <button class="answer-btn" onclick="checkAnswer(2)" id="btn2"></button>
            <button class="answer-btn" onclick="checkAnswer(3)" id="btn3"></button>
        </div>

        <div class="lifelines">
            <button class="lifeline-btn" id="help5050" onclick="use5050()">50:50</button>
            <button class="lifeline-btn" id="helpCall" onclick="useCall()">üìû</button>
            <button class="lifeline-btn" id="helpAsk" onclick="useAsk()">üë•</button>
        </div>
    </div>

    <script>
        // DATA
        const moneyTree = ["200K", "400K", "600K", "1Tr", "2Tr", "3Tr", "6Tr", "10Tr", "14Tr", "22Tr", "30Tr", "40Tr", "60Tr", "85Tr", "150 T·ª∂"];
        const questions = [
            { q: "SilverBullet l√† tool g√¨?", a: ["N·∫•u ƒÉn", "Check Acc", "Qu√©t nh√†", "S·ª≠a xe"], correct: 1 },
            { q: "Ai l√† b·∫°n th√¢n c·ªßa B√¨nh Pro?", a: ["Siri", "Alexa", "Gemini", "Cortana"], correct: 2 },
            { q: "iPhone kh√¥ng th√≠ch ƒëi·ªÅu g√¨?", a: ["Ti·ªÅn", "·ªêp l∆∞ng", "T·ª± ph√°t nh·∫°c", "S·∫°c pin"], correct: 2 },
            { q: "1 + 1 b·∫±ng m·∫•y?", a: ["1", "2", "3", "11"], correct: 1 },
            { q: "B√¨nh Pro c√≥ ƒë·∫πp trai kh√¥ng?", a: ["Kh√¥ng", "B√¨nh th∆∞·ªùng", "Si√™u c·∫•p", "Qu√° ƒë·∫πp"], correct: 3 },
        ];

        // √ÇM THANH (D√πng link Github tr·ª±c ti·∫øp - Load c·ª±c nhanh)
        const sounds = {
            intro: new Audio("https://github.com/Liozon/WhoWantsToBeAMillionaire-Soundboard/raw/master/sounds/main_theme.mp3"),
            correct: new Audio("https://github.com/Liozon/WhoWantsToBeAMillionaire-Soundboard/raw/master/sounds/correct_answer.mp3"),
            wrong: new Audio("https://github.com/Liozon/WhoWantsToBeAMillionaire-Soundboard/raw/master/sounds/wrong_answer.mp3")
        };
        sounds.intro.loop = true;

        let currentLevel = 0;
        let isGameRunning = false;

        // --- CHI√äU CU·ªêI: UNLOCK AUDIO ---
        function unlockAudioAndStart() {
            // 1. Ph√°t th·ª≠ m·ªói file 1 t√≠ x√≠u r·ªìi d·ª´ng ngay l·∫≠p t·ª©c
            // ƒê·ªÉ tr√¨nh duy·ªát ƒë√°nh d·∫•u l√† "User ƒë√£ cho ph√©p ph√°t m·∫•y file n√†y"
            try {
                sounds.intro.play().catch(()=>{});
                
                sounds.correct.volume = 0; // T·∫Øt ti·∫øng t·∫°m
                sounds.correct.play().then(() => { sounds.correct.pause(); sounds.correct.volume = 1; }).catch(()=>{});
                
                sounds.wrong.volume = 0; 
                sounds.wrong.play().then(() => { sounds.wrong.pause(); sounds.wrong.volume = 1; }).catch(()=>{});

            } catch (e) {
                console.log("L·ªói k√≠ch ho·∫°t √¢m thanh: " + e);
            }

            // 2. ·∫®n m√†n h√¨nh ch·ªù & B·∫Øt ƒë·∫ßu game th·∫≠t
            document.getElementById('start-screen').style.display = 'none';
            startGame();
        }

        function startGame() {
            currentLevel = 0;
            isGameRunning = true;
            renderMoneyLadder();
            loadQuestion();
            // Ph√°t l·∫°i nh·∫°c n·ªÅn (l·∫ßn n√†y l√† ph√°t th·∫≠t)
            sounds.intro.currentTime = 0;
            sounds.intro.play().catch(e => alert("V·∫´n ch∆∞a b·∫≠t ƒë∆∞·ª£c ti·∫øng, h√£y t·∫Øt ch·∫ø ƒë·ªô Im l·∫∑ng b√™n h√¥ng m√°y!"));
        }

        // --- LOGIC GAME C∆† B·∫¢N ---
        function renderMoneyLadder() {
            const ladder = document.getElementById('moneyLadder');
            ladder.innerHTML = '';
            let start = Math.max(0, currentLevel - 2);
            let end = Math.min(moneyTree.length, currentLevel + 3);
            for (let i = moneyTree.length - 1; i >= 0; i--) {
                const div = document.createElement('div');
                div.className = `money-step ${i === currentLevel ? 'active' : ''}`;
                div.innerText = `${i + 1}. ${moneyTree[i]}`;
                if(i===4 || i===9 || i===14) div.style.color = "#f0ad4e";
                ladder.appendChild(div);
            }
        }

        function loadQuestion() {
            if (currentLevel >= questions.length) { endGame(true); return; }
            const qData = questions[currentLevel];
            document.getElementById('questionText').innerText = `C√¢u ${currentLevel + 1}: ${qData.q}`;
            for (let i = 0; i < 4; i++) {
                const btn = document.getElementById(`btn${i}`);
                btn.innerText = `‚û§ ${qData.a[i]}`;
                btn.className = 'answer-btn'; 
                btn.style.visibility = 'visible';
            }
            renderMoneyLadder();
        }

        function checkAnswer(index) {
            if (!isGameRunning) return;
            const correctIndex = questions[currentLevel].correct;
            const selectedBtn = document.getElementById(`btn${index}`);
            selectedBtn.classList.add('selected');
            
            setTimeout(() => {
                selectedBtn.classList.remove('selected');
                if (index === correctIndex) {
                    // Ph√°t ti·∫øng ƒë√∫ng
                    sounds.correct.currentTime = 0;
                    sounds.correct.play();
                    selectedBtn.classList.add('correct');
                    setTimeout(() => { currentLevel++; loadQuestion(); }, 1500);
                } else {
                    // Ph√°t ti·∫øng sai
                    sounds.intro.pause();
                    sounds.wrong.currentTime = 0;
                    sounds.wrong.play();
                    selectedBtn.classList.add('wrong');
                    document.getElementById(`btn${questions[currentLevel].correct}`).classList.add('correct');
                    setTimeout(() => endGame(false), 2000);
                }
            }, 1000);
        }

        function endGame(isWin) {
            isGameRunning = false;
            sounds.intro.pause();
            document.getElementById('result-screen').style.display = 'flex';
            document.getElementById('result-title').innerText = isWin ? "B√åNH PRO V√î ƒê·ªäCH!" : "THUA R·ªíI...";
            let money = "0";
            if(isWin) money = moneyTree[14];
            else if(currentLevel > 0) money = moneyTree[currentLevel - 1];
            document.getElementById('result-money').innerText = `Ti·ªÅn c·∫ßm v·ªÅ: ${money}`;
        }

        function use5050() {
            const btn = document.getElementById('help5050');
            if(btn.classList.contains('used')) return;
            const correct = questions[currentLevel].correct;
            let removed = 0;
            while(removed < 2) {
                let r = Math.floor(Math.random()*4);
                if(r !== correct && document.getElementById(`btn${r}`).style.visibility !== 'hidden') {
                    document.getElementById(`btn${r}`).style.visibility = 'hidden';
                    removed++;
                }
            }
            btn.classList.add('used');
        }
        function useCall() { alert("V·ª£ b·∫£o ƒë√°p √°n C!"); document.getElementById('helpCall').classList.add('used'); }
        function useAsk() { alert("Kh√°n gi·∫£ b·∫£o ch·ªçn ƒë·∫°i ƒëi!"); document.getElementById('helpAsk').classList.add('used'); }
    </script>
</body>
</html>
